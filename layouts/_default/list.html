{{/*
  List Page Layout
  Displays paginated lists of content (blog posts, articles, etc.).
  Used for section pages like /posts/ and includes microformats (h-feed) for better syndication.
*/}}
{{ define "main" }}
{{ partial "breadcrumbs.html" . }}

<article>
  <header>
    <h1>{{ .Title }}</h1>
    {{ with .Content }}
      <div class="page-content">{{ . }}</div>
    {{ end }}
  </header>

  {{ $paginator := .Paginate .Pages }}
  {{ if $paginator.Pages }}
    <ul class="post-list h-feed">
      {{ range $paginator.Pages }}
        <li class="h-entry">
          <article>
            <h2 class="p-name"><a class="u-url" href="{{ .RelPermalink }}">{{ .Title }}</a></h2>
            {{ with .Description }}
              <p class="p-summary">{{ . }}</p>
            {{ else }}
              {{ with .Summary }}
                <p class="p-summary">{{ . | plainify | truncate 155 }}</p>
              {{ end }}
            {{ end }}
            <time class="dt-published" datetime="{{ .PublishDate.Format "2006-01-02" }}">
              {{ .PublishDate.Format "January 2, 2006" }}
            </time>
          </article>
        </li>
      {{ end }}
    </ul>

    {{ partial "pagination.html" . }}
  {{ else }}
    <p>No posts found.</p>
  {{ end }}
</article>
{{ end }}
